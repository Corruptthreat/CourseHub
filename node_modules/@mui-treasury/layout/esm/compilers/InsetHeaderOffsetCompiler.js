import { combineBreakpoints, pickNearestBreakpoint } from "../utils";
import { isFixedInsetSidebarConfig } from "../utils/sidebarChecker";
export default (function (insetSidebar, header) {
  return {
    getResultStyle: function getResultStyle(sidebarId) {
      var result = {};
      var found = false;
      var configMap = insetSidebar.configMapById[sidebarId];

      if (configMap) {
        var breakpoints = combineBreakpoints(configMap, header);
        breakpoints.forEach(function (bp) {
          var config = pickNearestBreakpoint(configMap, bp);

          if (config) {
            if (isFixedInsetSidebarConfig(config)) {
              found = true;
              result[bp] = {
                height: pickNearestBreakpoint(header, bp).initialHeight
              };
            } else if (found) {
              found = false;
              result[bp] = {
                height: 0
              };
            }
          }
        });
      }

      return result;
    }
  };
});