import { get } from '../utils';
import { keys } from '@material-ui/core/styles/createBreakpoints';
import { isPersistentSidebarConfig, isTemporarySidebarConfig } from '../utils/sidebarChecker';
export default (function (edgeSidebar) {
  return {
    getHiddenBreakpoints: function getHiddenBreakpoints(sidebarId) {
      if (get(edgeSidebar, ['hiddenById', sidebarId]) === keys) {
        // hidden at all breakpoints if true
        return keys;
      }

      var result = [];
      var found = false;
      keys.forEach(function (bp) {
        var config = get(edgeSidebar.configMapById, [sidebarId, bp]);

        if ((isPersistentSidebarConfig(config) || isTemporarySidebarConfig(config)) && !config.hidden) {
          found = true;
        } else if (config || !config && !found) {
          result.push(bp);
          found = false;
        }
      });
      return result;
    }
  };
});