import EdgeSidebars from "../effects/EdgeSidebars";
import createHeaderModel from "../models/Header/HeaderModel";
import { combineBreakpoints, pickNearestBreakpoint } from "../utils";
export default (function (state, header, edgeSidebar) {
  return {
    getResultStyle: function getResultStyle() {
      var result = {};
      var breakpoints = combineBreakpoints(header, edgeSidebar.configMap);
      EdgeSidebars(state, edgeSidebar).iterateBreakpointEffects(breakpoints, function (bp, effects) {
        var headerConfig = pickNearestBreakpoint(header, bp);

        if (!headerConfig) {
          throw new Error("Cannot find HeaderConfig at breakpoint: ".concat(bp, ", please provide config at least on \"xs\" breakpoint"));
        }

        result[bp] = createHeaderModel(headerConfig, effects).getStyle();
      });
      return result;
    }
  };
});