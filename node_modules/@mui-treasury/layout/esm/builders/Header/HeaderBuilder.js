function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

import { pickNearestBreakpoint } from '../../utils';
import { INITIAL_HEADER_HEIGHT, DEFAULT_HEADER_ID } from '../../utils';
export default (function () {
  var initialMap = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var id = DEFAULT_HEADER_ID;

  var map = _extends({}, initialMap);

  var Registry = function Registry(headerId) {
    return {
      registerConfig: function registerConfig(breakpoint, config) {
        map[breakpoint] = _extends(_extends({
          initialHeight: pickNearestBreakpoint(INITIAL_HEADER_HEIGHT, breakpoint)
        }, config), {}, {
          id: headerId
        });
        return this;
      }
    };
  };

  var defaultRegistry = Registry(id);
  return {
    create: function create(headerId) {
      id = headerId;
      map = _extends({}, initialMap); // reset map

      return Registry(headerId); // return new registry
    },
    registerConfig: defaultRegistry.registerConfig,
    update: function update(updater) {
      updater(map);
    },
    getId: function getId() {
      return id;
    },
    getData: function getData() {
      return map;
    },
    debug: function debug() {
      if (process.env.NODE_ENV !== 'production') {
        console.group('Header:', "\"".concat(id, "\""));
        console.table(map);
        console.groupEnd();
      }
    }
  };
});