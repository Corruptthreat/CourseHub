{"ast":null,"code":"import axios from\"../../axios\";import*as actionTypes from\"./actionTypes\";export var authStart=function authStart(){return{type:actionTypes.AUTH_START};};export var authSuccess=function authSuccess(authData,message){return{type:actionTypes.AUTH_SUCCESS,authData:authData,message:message};};export var authFail=function authFail(error){return{type:actionTypes.AUTH_FAIL,error:error};};export var auth=function auth(values,history,isSignUp){return function(dispatch){dispatch(authStart());var url=\"/QuanLyNguoiDung/DangNhap\";var authData={taiKhoan:values.username,matKhau:values.password};if(isSignUp){url=\"/QuanLyNguoiDung/DangKy\";authData={taiKhoan:values.username,matKhau:values.password,hoTen:values.name,soDT:values.phone,maNhom:values.group,email:values.email};}axios.post(url,authData).then(function(response){if(isSignUp){dispatch(authSuccess(response.data,\"Create account successfuly!\"));history.push(\"/sign-in\");}else{dispatch(authSuccess(response.data,\"Login successfuly!\"));localStorage.setItem(\"user\",JSON.stringify(response.data));history.push(\"/\");}}).catch(function(error){dispatch(authFail(error.response.data));});};};export var logout=function logout(){localStorage.removeItem(\"user\");return{type:actionTypes.AUTH_LOGOUT};};// export const setAuthRedirectPath = (path) => {\n//   return {\n//     type: actionTypes.SET_AUTH_REDIRECT_PATH,\n//     path: path,\n//   };\n// };\nexport var authCheckState=function authCheckState(){return function(dispatch){var user=localStorage.getItem(\"user\");if(!user){dispatch(logout());}else{dispatch(authSuccess(\"user\"));}};};export var chooseGroup=function chooseGroup(group){return{type:actionTypes.CHOOSE_GROUP,group:group};};","map":{"version":3,"sources":["/home/sudo-byte/CourseHub-master/src/store/actions/auth.js"],"names":["axios","actionTypes","authStart","type","AUTH_START","authSuccess","authData","message","AUTH_SUCCESS","authFail","error","AUTH_FAIL","auth","values","history","isSignUp","dispatch","url","taiKhoan","username","matKhau","password","hoTen","name","soDT","phone","maNhom","group","email","post","then","response","data","push","localStorage","setItem","JSON","stringify","catch","logout","removeItem","AUTH_LOGOUT","authCheckState","user","getItem","chooseGroup","CHOOSE_GROUP"],"mappings":"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","sourcesContent":["import axios from \"../../axios\";\r\nimport * as actionTypes from \"./actionTypes\";\r\n\r\nexport const authStart = () => {\r\n  return {\r\n    type: actionTypes.AUTH_START,\r\n  };\r\n};\r\n\r\nexport const authSuccess = (authData, message) => {\r\n  return {\r\n    type: actionTypes.AUTH_SUCCESS,\r\n    authData: authData,\r\n    message: message,\r\n  };\r\n};\r\n\r\nexport const authFail = (error) => {\r\n  return {\r\n    type: actionTypes.AUTH_FAIL,\r\n    error: error,\r\n  };\r\n};\r\n\r\nexport const auth = (values, history, isSignUp) => {\r\n  return (dispatch) => {\r\n    dispatch(authStart());\r\n    let url = \"/QuanLyNguoiDung/DangNhap\";\r\n    let authData = {\r\n      taiKhoan: values.username,\r\n      matKhau: values.password,\r\n    };\r\n    if (isSignUp) {\r\n      url = \"/QuanLyNguoiDung/DangKy\";\r\n      authData = {\r\n        taiKhoan: values.username,\r\n        matKhau: values.password,\r\n        hoTen: values.name,\r\n        soDT: values.phone,\r\n        maNhom: values.group,\r\n        email: values.email,\r\n      };\r\n    }\r\n    axios\r\n      .post(url, authData)\r\n      .then((response) => {\r\n        if (isSignUp) {\r\n          dispatch(authSuccess(response.data, \"Create account successfuly!\"));\r\n          history.push(\"/sign-in\");\r\n        } else {\r\n          dispatch(authSuccess(response.data, \"Login successfuly!\"));\r\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        dispatch(authFail(error.response.data));\r\n      });\r\n  };\r\n};\r\n\r\nexport const logout = () => {\r\n  localStorage.removeItem(\"user\");\r\n  return {\r\n    type: actionTypes.AUTH_LOGOUT,\r\n  };\r\n};\r\n\r\n// export const setAuthRedirectPath = (path) => {\r\n//   return {\r\n//     type: actionTypes.SET_AUTH_REDIRECT_PATH,\r\n//     path: path,\r\n//   };\r\n// };\r\n\r\nexport const authCheckState = () => {\r\n  return (dispatch) => {\r\n    const user = localStorage.getItem(\"user\");\r\n    if (!user) {\r\n      dispatch(logout());\r\n    } else {\r\n      dispatch(authSuccess(\"user\"));\r\n    }\r\n  };\r\n};\r\n\r\nexport const chooseGroup = (group) => {\r\n  return {\r\n    type: actionTypes.CHOOSE_GROUP,\r\n    group: group,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}