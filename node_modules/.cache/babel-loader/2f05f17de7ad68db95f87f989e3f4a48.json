{"ast":null,"code":"import axios from\"../../axios\";import*as actionTypes from\"./actionTypes\";export var userClearMessage=function userClearMessage(){return{type:actionTypes.USER_CLEAR_MESSAGE};};export var enrollCourseStart=function enrollCourseStart(){return{type:actionTypes.ENROLL_COURSE_START};};export var enrollCourseSuccess=function enrollCourseSuccess(success){return{type:actionTypes.ENROLL_COURSE_SUCCESS,success:success};};export var enrollCourseFail=function enrollCourseFail(error){return{type:actionTypes.ENROLL_COURSE_FAIL,error:error};};export var EnrollCourse=function EnrollCourse(courseId,isMe){return function(dispatch){dispatch(enrollCourseStart());var user=JSON.parse(localStorage.getItem(\"user\"));var headers={\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(user.accessToken)};var data={maKhoaHoc:courseId,taiKhoan:user.taiKhoan};var url=\"/QuanLyKhoaHoc/DangKyKhoaHoc\";if(isMe){url=\"/QuanLyKhoaHoc/HuyGhiDanh\";}axios({method:\"post\",url:url,headers:headers,data:data}).then(function(response){dispatch(enrollCourseSuccess(response.data));dispatch(fetchUserListInThisCourse(courseId));}).catch(function(error){dispatch(enrollCourseFail(error.response.data));});};};export var fetchUserListInThisCourseStart=function fetchUserListInThisCourseStart(){return{type:actionTypes.FETCH_USER_LIST_IN_THIS_COURSE_START};};export var fetchUserListInThisCourseSuccess=function fetchUserListInThisCourseSuccess(userList){return{type:actionTypes.FETCH_USER_LIST_IN_THIS_COURSE_SUCCESS,userList:userList};};export var fetchUserListInThisCourseFail=function fetchUserListInThisCourseFail(error){return{type:actionTypes.FETCH_USER_LIST_IN_THIS_COURSE_FAIL,error:error};};export var fetchUserListInThisCourse=function fetchUserListInThisCourse(courseId){return function(dispatch){dispatch(fetchUserListInThisCourseStart());var user=JSON.parse(localStorage.getItem(\"user\"));if(user&&user.accessToken){var config={method:\"get\",url:\"/QuanLyKhoaHoc/LayThongTinHocVienKhoaHoc?maKhoaHoc=\".concat(courseId),headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(user.accessToken)}};axios(config).then(function(response){// console.log(response.data);\ndispatch(fetchUserListInThisCourseSuccess(response.data));}).catch(function(error){// console.log(error);\ndispatch(fetchUserListInThisCourseFail(error.response.data));});}};};","map":{"version":3,"sources":["/home/sudo-byte/CourseHub-master/src/store/actions/user.js"],"names":["axios","actionTypes","userClearMessage","type","USER_CLEAR_MESSAGE","enrollCourseStart","ENROLL_COURSE_START","enrollCourseSuccess","success","ENROLL_COURSE_SUCCESS","enrollCourseFail","error","ENROLL_COURSE_FAIL","EnrollCourse","courseId","isMe","dispatch","user","JSON","parse","localStorage","getItem","headers","Authorization","accessToken","data","maKhoaHoc","taiKhoan","url","method","then","response","fetchUserListInThisCourse","catch","fetchUserListInThisCourseStart","FETCH_USER_LIST_IN_THIS_COURSE_START","fetchUserListInThisCourseSuccess","userList","FETCH_USER_LIST_IN_THIS_COURSE_SUCCESS","fetchUserListInThisCourseFail","FETCH_USER_LIST_IN_THIS_COURSE_FAIL","config"],"mappings":"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","sourcesContent":["import axios from \"../../axios\";\r\nimport * as actionTypes from \"./actionTypes\";\r\n\r\nexport const userClearMessage = () => {\r\n  return {\r\n    type: actionTypes.USER_CLEAR_MESSAGE,\r\n  };\r\n};\r\n\r\nexport const enrollCourseStart = () => {\r\n  return {\r\n    type: actionTypes.ENROLL_COURSE_START,\r\n  };\r\n};\r\n\r\nexport const enrollCourseSuccess = (success) => {\r\n  return {\r\n    type: actionTypes.ENROLL_COURSE_SUCCESS,\r\n    success: success,\r\n  };\r\n};\r\n\r\nexport const enrollCourseFail = (error) => {\r\n  return {\r\n    type: actionTypes.ENROLL_COURSE_FAIL,\r\n    error: error,\r\n  };\r\n};\r\n\r\nexport const EnrollCourse = (courseId, isMe) => {\r\n  return (dispatch) => {\r\n    dispatch(enrollCourseStart());\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${user.accessToken}`,\r\n    };\r\n    const data = {\r\n      maKhoaHoc: courseId,\r\n      taiKhoan: user.taiKhoan,\r\n    };\r\n    let url = \"/QuanLyKhoaHoc/DangKyKhoaHoc\";\r\n    if (isMe) {\r\n      url = \"/QuanLyKhoaHoc/HuyGhiDanh\";\r\n    }\r\n    axios({ method: \"post\", url, headers, data })\r\n      .then((response) => {\r\n        dispatch(enrollCourseSuccess(response.data));\r\n        dispatch(fetchUserListInThisCourse(courseId));\r\n      })\r\n      .catch((error) => {\r\n        dispatch(enrollCourseFail(error.response.data));\r\n      });\r\n  };\r\n};\r\n\r\nexport const fetchUserListInThisCourseStart = () => {\r\n  return {\r\n    type: actionTypes.FETCH_USER_LIST_IN_THIS_COURSE_START,\r\n  };\r\n};\r\n\r\nexport const fetchUserListInThisCourseSuccess = (userList) => {\r\n  return {\r\n    type: actionTypes.FETCH_USER_LIST_IN_THIS_COURSE_SUCCESS,\r\n    userList: userList,\r\n  };\r\n};\r\n\r\nexport const fetchUserListInThisCourseFail = (error) => {\r\n  return {\r\n    type: actionTypes.FETCH_USER_LIST_IN_THIS_COURSE_FAIL,\r\n    error: error,\r\n  };\r\n};\r\n\r\nexport const fetchUserListInThisCourse = (courseId) => {\r\n  return (dispatch) => {\r\n    dispatch(fetchUserListInThisCourseStart());\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (user && user.accessToken) {\r\n      let config = {\r\n        method: \"get\",\r\n        url: `/QuanLyKhoaHoc/LayThongTinHocVienKhoaHoc?maKhoaHoc=${courseId}`,\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${user.accessToken}`,\r\n        },\r\n      };\r\n\r\n      axios(config)\r\n        .then((response) => {\r\n          // console.log(response.data);\r\n          dispatch(fetchUserListInThisCourseSuccess(response.data));\r\n        })\r\n        .catch((error) => {\r\n          // console.log(error);\r\n          dispatch(fetchUserListInThisCourseFail(error.response.data));\r\n        });\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}