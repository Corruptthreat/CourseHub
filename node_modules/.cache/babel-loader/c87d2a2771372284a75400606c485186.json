{"ast":null,"code":"import React,{useEffect,Fragment}from\"react\";import*as actions from\"../../store/actions\";import{connect}from\"react-redux\";import{useSnackbar}from\"notistack\";import{makeStyles}from\"@material-ui/core/styles\";import{List,ListItem,ListItemSecondaryAction}from\"@material-ui/core\";import{ListItemText,ListItemAvatar,Avatar}from\"@material-ui/core\";import{Box,TextField,Button,Grid}from\"@material-ui/core\";import{Badge,IconButton,Fab,Tooltip}from\"@material-ui/core\";import DeleteIcon from\"@material-ui/icons/Delete\";import AddIcon from\"@material-ui/icons/Add\";import EditIcon from\"@material-ui/icons/Edit\";import Spinner from\"../UI/Spinner/Spinner\";import DataLength from\"../DataDisplay/DataLength\";import ChooseGroup from\"./InputCustom/ChooseGroup\";var useStyles=makeStyles(function(theme){return{userItems:{width:\"100%\",minWidth:350,backgroundColor:theme.palette.background.paper},userList:{height:\"74.5vh\",overflowY:\"auto\",\"@media (max-width: 756px)\":{height:\"25vh\"}},childMargin:{\"& > *\":{margin:theme.spacing(0)}}};});function UserList(props){var classes=useStyles();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var group=props.group,tabIndex=props.tabIndex,success=props.success,error=props.error,userList=props.userList,loading=props.loading;var onFetchInfoClick=props.onFetchInfoClick,onSearchUser=props.onSearchUser,onEditUserClick=props.onEditUserClick,onAddUserClick=props.onAddUserClick,onFetchUsers=props.onFetchUsers,onDeleteUser=props.onDeleteUser,onFetchCourseApprovalPending=props.onFetchCourseApprovalPending,onFetchCourseApproved=props.onFetchCourseApproved,onFetchCourseNoneEnroll=props.onFetchCourseNoneEnroll;useEffect(function(){onFetchUsers(group);},[onFetchUsers,group]);useEffect(function(){if(error){enqueueSnackbar(error,{variant:\"error\",anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"}});}else if(success){enqueueSnackbar(success,{variant:\"success\",anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"}});}},[error,success,enqueueSnackbar]);var handleInfo=function handleInfo(selectedUser,avatarIndex){onFetchInfoClick(selectedUser,tabIndex,avatarIndex);onFetchCourseApprovalPending(selectedUser);onFetchCourseApproved(selectedUser);onFetchCourseNoneEnroll(selectedUser);};var handleDeleteConfirm=function handleDeleteConfirm(user){enqueueSnackbar(\"Are you sure to delete \".concat(user.taiKhoan,\"?\"),{variant:\"info\",anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},action:/*#__PURE__*/React.createElement(Button,{size:\"small\",variant:\"contained\",onClick:function onClick(){return onDeleteUser(user,group);},startIcon:/*#__PURE__*/React.createElement(DeleteIcon,null)},\"Delete\")});};var userListRender=/*#__PURE__*/React.createElement(Spinner,null);if(userList&&userList.length>0){userListRender=userList.map(function(user,index){var isGV=user.maLoaiNguoiDung===\"GV\";var labelId=\"checkbox-list-secondary-label-\".concat(index);return/*#__PURE__*/React.createElement(ListItem,{key:user.taiKhoan,button:true,onClick:function onClick(){return handleInfo(user,index);}},/*#__PURE__*/React.createElement(ListItemAvatar,null,/*#__PURE__*/React.createElement(Badge,{badgeContent:isGV?user.maLoaiNguoiDung:null,color:\"error\"},/*#__PURE__*/React.createElement(Avatar,{alt:\"Avatar n\\xB0\".concat(index+1),src:index>69?null:\"https://i.pravatar.cc/150?img=\".concat(index+1)}))),/*#__PURE__*/React.createElement(ListItemText,{id:labelId,primary:user.taiKhoan,secondary:user.email}),/*#__PURE__*/React.createElement(ListItemSecondaryAction,null,/*#__PURE__*/React.createElement(Tooltip,{title:\"Edit\",placement:\"left\"},/*#__PURE__*/React.createElement(IconButton,{edge:\"end\",\"aria-label\":\"edit\",onClick:function onClick(){return onEditUserClick(user,tabIndex);}},/*#__PURE__*/React.createElement(EditIcon,null))),/*#__PURE__*/React.createElement(Tooltip,{title:\"Delete\",placement:\"right\"},/*#__PURE__*/React.createElement(IconButton,{edge:\"end\",\"aria-label\":\"delete\",onClick:function onClick(){return handleDeleteConfirm(user);}},/*#__PURE__*/React.createElement(DeleteIcon,null)))));});}return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(List,{dense:true,className:classes.userItems},/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"space-between\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Fab,{color:\"primary\",size:\"small\",\"aria-label\":\"add\",onClick:function onClick(){return onAddUserClick();},disabled:loading},/*#__PURE__*/React.createElement(Tooltip,{title:\"Add\",placement:\"right\"},/*#__PURE__*/React.createElement(AddIcon,null))),userList&&userList.length?/*#__PURE__*/React.createElement(DataLength,{items:userList.length,type:\"users\"}):null,/*#__PURE__*/React.createElement(ChooseGroup,null))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(Box,{mb:1,mr:1,width:\"100%\"},/*#__PURE__*/React.createElement(TextField,{id:\"filled-search\",label:\"Search User...\",type:\"search\",fullWidth:true,onChange:function onChange(event){return onSearchUser(event.target.value,group);}}))),/*#__PURE__*/React.createElement(Box,{className:classes.userList},userListRender)));}var mapStateToProps=function mapStateToProps(state){return{group:state.auth.group,tabIndex:state.usersManager.tabIndex,userList:state.usersManager.userList,error:state.usersManager.error,success:state.usersManager.success,loading:state.usersManager.loading,coursesPendingList:state.usersManager.coursesPendingList};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onFetchInfoClick:function onFetchInfoClick(selectedUser,tabIndex,avatarIndex){return dispatch(actions.fetchInfoClick(selectedUser,tabIndex,avatarIndex));},onSearchUser:function onSearchUser(keyWord,group){return dispatch(actions.searchUser(keyWord,group));},onEditUserClick:function onEditUserClick(selectedUser,tabIndex){return dispatch(actions.editUserClick(selectedUser,tabIndex));},onAddUserClick:function onAddUserClick(){return dispatch(actions.addUserClick());},onFetchUsers:function onFetchUsers(group){return dispatch(actions.fetchUsers(group));},onDeleteUser:function onDeleteUser(selectedUser,group){return dispatch(actions.deleteUser(selectedUser,group));},onFetchCourseApprovalPending:function onFetchCourseApprovalPending(selectedUser){return dispatch(actions.fetchCourseApprovalPending(selectedUser));},onFetchCourseApproved:function onFetchCourseApproved(selectedUser){return dispatch(actions.fetchCourseApproved(selectedUser));},onFetchCourseNoneEnroll:function onFetchCourseNoneEnroll(selectedUser){return dispatch(actions.fetchCourseNoneEnroll(selectedUser));}// onMessageReset: () => dispatch(actions.clearMessage()),\n};};export default connect(mapStateToProps,mapDispatchToProps)(UserList);","map":{"version":3,"sources":["/home/sudo-byte/CourseHub-master/src/components/Users/UserList.js"],"names":["React","useEffect","Fragment","actions","connect","useSnackbar","makeStyles","List","ListItem","ListItemSecondaryAction","ListItemText","ListItemAvatar","Avatar","Box","TextField","Button","Grid","Badge","IconButton","Fab","Tooltip","DeleteIcon","AddIcon","EditIcon","Spinner","DataLength","ChooseGroup","useStyles","theme","userItems","width","minWidth","backgroundColor","palette","background","paper","userList","height","overflowY","childMargin","margin","spacing","UserList","props","classes","enqueueSnackbar","group","tabIndex","success","error","loading","onFetchInfoClick","onSearchUser","onEditUserClick","onAddUserClick","onFetchUsers","onDeleteUser","onFetchCourseApprovalPending","onFetchCourseApproved","onFetchCourseNoneEnroll","variant","anchorOrigin","vertical","horizontal","handleInfo","selectedUser","avatarIndex","handleDeleteConfirm","user","taiKhoan","action","userListRender","length","map","index","isGV","maLoaiNguoiDung","labelId","email","event","target","value","mapStateToProps","state","auth","usersManager","coursesPendingList","mapDispatchToProps","dispatch","fetchInfoClick","keyWord","searchUser","editUserClick","addUserClick","fetchUsers","deleteUser","fetchCourseApprovalPending","fetchCourseApproved","fetchCourseNoneEnroll"],"mappings":"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","sourcesContent":["import React, { useEffect, Fragment } from \"react\";\r\n\r\nimport * as actions from \"../../store/actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { List, ListItem, ListItemSecondaryAction } from \"@material-ui/core\";\r\nimport { ListItemText, ListItemAvatar, Avatar } from \"@material-ui/core\";\r\nimport { Box, TextField, Button, Grid } from \"@material-ui/core\";\r\nimport { Badge, IconButton, Fab, Tooltip } from \"@material-ui/core\";\r\n\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport Spinner from \"../UI/Spinner/Spinner\";\r\nimport DataLength from \"../DataDisplay/DataLength\";\r\nimport ChooseGroup from \"./InputCustom/ChooseGroup\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  userItems: {\r\n    width: \"100%\",\r\n    minWidth: 350,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  userList: {\r\n    height: \"74.5vh\",\r\n    overflowY: \"auto\",\r\n    \"@media (max-width: 756px)\": {\r\n      height: \"25vh\",\r\n    },\r\n  },\r\n  childMargin: {\r\n    \"& > *\": {\r\n      margin: theme.spacing(0),\r\n    },\r\n  },\r\n}));\r\n\r\nfunction UserList(props) {\r\n  const classes = useStyles();\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  const { group, tabIndex, success, error, userList, loading } = props;\r\n  const {\r\n    onFetchInfoClick,\r\n    onSearchUser,\r\n    onEditUserClick,\r\n    onAddUserClick,\r\n    onFetchUsers,\r\n    onDeleteUser,\r\n    onFetchCourseApprovalPending,\r\n    onFetchCourseApproved,\r\n    onFetchCourseNoneEnroll,\r\n  } = props;\r\n\r\n  useEffect(() => {\r\n    onFetchUsers(group);\r\n  }, [onFetchUsers, group]);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      enqueueSnackbar(error, {\r\n        variant: \"error\",\r\n        anchorOrigin: {\r\n          vertical: \"bottom\",\r\n          horizontal: \"right\",\r\n        },\r\n      });\r\n    } else if (success) {\r\n      enqueueSnackbar(success, {\r\n        variant: \"success\",\r\n        anchorOrigin: {\r\n          vertical: \"bottom\",\r\n          horizontal: \"right\",\r\n        },\r\n      });\r\n    }\r\n  }, [error, success, enqueueSnackbar]);\r\n\r\n  const handleInfo = (selectedUser, avatarIndex) => {\r\n    onFetchInfoClick(selectedUser, tabIndex, avatarIndex);\r\n    onFetchCourseApprovalPending(selectedUser);\r\n    onFetchCourseApproved(selectedUser);\r\n    onFetchCourseNoneEnroll(selectedUser);\r\n  };\r\n\r\n  const handleDeleteConfirm = (user) => {\r\n    enqueueSnackbar(`Are you sure to delete ${user.taiKhoan}?`, {\r\n      variant: \"info\",\r\n      anchorOrigin: {\r\n        vertical: \"bottom\",\r\n        horizontal: \"right\",\r\n      },\r\n      action: (\r\n        <Button\r\n          size=\"small\"\r\n          variant=\"contained\"\r\n          onClick={() => onDeleteUser(user, group)}\r\n          startIcon={<DeleteIcon />}\r\n        >\r\n          Delete\r\n        </Button>\r\n      ),\r\n    });\r\n  };\r\n\r\n  let userListRender = <Spinner />;\r\n\r\n  if (userList && userList.length > 0) {\r\n    userListRender = userList.map((user, index) => {\r\n      const isGV = user.maLoaiNguoiDung === \"GV\";\r\n      const labelId = `checkbox-list-secondary-label-${index}`;\r\n      return (\r\n        <ListItem\r\n          key={user.taiKhoan}\r\n          button\r\n          onClick={() => handleInfo(user, index)}\r\n        >\r\n          <ListItemAvatar>\r\n            <Badge\r\n              badgeContent={isGV ? user.maLoaiNguoiDung : null}\r\n              color=\"error\"\r\n            >\r\n              <Avatar\r\n                alt={`Avatar nÂ°${index + 1}`}\r\n                src={\r\n                  index > 69\r\n                    ? null\r\n                    : `https://i.pravatar.cc/150?img=${index + 1}`\r\n                }\r\n              />\r\n            </Badge>\r\n          </ListItemAvatar>\r\n          <ListItemText\r\n            id={labelId}\r\n            primary={user.taiKhoan}\r\n            secondary={user.email}\r\n          />\r\n          <ListItemSecondaryAction>\r\n            <Tooltip title=\"Edit\" placement=\"left\">\r\n              <IconButton\r\n                edge=\"end\"\r\n                aria-label=\"edit\"\r\n                onClick={() => onEditUserClick(user, tabIndex)}\r\n              >\r\n                <EditIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n\r\n            <Tooltip title=\"Delete\" placement=\"right\">\r\n              <IconButton\r\n                edge=\"end\"\r\n                aria-label=\"delete\"\r\n                onClick={() => handleDeleteConfirm(user)}\r\n              >\r\n                <DeleteIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </ListItemSecondaryAction>\r\n        </ListItem>\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <List dense className={classes.userItems}>\r\n        <ListItem>\r\n          <Grid container justify=\"space-between\" alignItems=\"center\">\r\n            <Fab\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              aria-label=\"add\"\r\n              onClick={() => onAddUserClick()}\r\n              disabled={loading}\r\n            >\r\n              <Tooltip title=\"Add\" placement=\"right\">\r\n                <AddIcon />\r\n              </Tooltip>\r\n            </Fab>\r\n\r\n            {userList && userList.length ? (\r\n              <DataLength items={userList.length} type={\"users\"} />\r\n            ) : null}\r\n\r\n            <ChooseGroup />\r\n          </Grid>\r\n        </ListItem>\r\n\r\n        <ListItem>\r\n          <Box mb={1} mr={1} width={\"100%\"}>\r\n            <TextField\r\n              id=\"filled-search\"\r\n              label=\"Search User...\"\r\n              type=\"search\"\r\n              fullWidth\r\n              onChange={(event) => onSearchUser(event.target.value, group)}\r\n            />\r\n          </Box>\r\n        </ListItem>\r\n\r\n        <Box className={classes.userList}>{userListRender}</Box>\r\n      </List>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    group: state.auth.group,\r\n    tabIndex: state.usersManager.tabIndex,\r\n    userList: state.usersManager.userList,\r\n    error: state.usersManager.error,\r\n    success: state.usersManager.success,\r\n    loading: state.usersManager.loading,\r\n    coursesPendingList: state.usersManager.coursesPendingList,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onFetchInfoClick: (selectedUser, tabIndex, avatarIndex) =>\r\n      dispatch(actions.fetchInfoClick(selectedUser, tabIndex, avatarIndex)),\r\n    onSearchUser: (keyWord, group) =>\r\n      dispatch(actions.searchUser(keyWord, group)),\r\n    onEditUserClick: (selectedUser, tabIndex) =>\r\n      dispatch(actions.editUserClick(selectedUser, tabIndex)),\r\n    onAddUserClick: () => dispatch(actions.addUserClick()),\r\n    onFetchUsers: (group) => dispatch(actions.fetchUsers(group)),\r\n    onDeleteUser: (selectedUser, group) =>\r\n      dispatch(actions.deleteUser(selectedUser, group)),\r\n    onFetchCourseApprovalPending: (selectedUser) =>\r\n      dispatch(actions.fetchCourseApprovalPending(selectedUser)),\r\n    onFetchCourseApproved: (selectedUser) =>\r\n      dispatch(actions.fetchCourseApproved(selectedUser)),\r\n    onFetchCourseNoneEnroll: (selectedUser) =>\r\n      dispatch(actions.fetchCourseNoneEnroll(selectedUser)),\r\n    // onMessageReset: () => dispatch(actions.clearMessage()),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserList);\r\n"]},"metadata":{},"sourceType":"module"}